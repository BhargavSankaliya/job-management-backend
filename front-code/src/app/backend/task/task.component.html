<div class="Breadcrumb">
    <ul>
        <li>
            <a routerLink="/admin/dashboard">Dashboard</a>
        </li>
        <li>/</li>
        <li class="active">Task</li>
    </ul>
</div>
<div class="card">
    <div class="card-header">
        <div class="d-md-flex align-item-center justify-content-between mb-3">
            <div class="input-search mb-3">
                <!-- <input class="form-control" [(ngModel)]="search" (input)="searchFilter()" type="search"
                    [placeholder]="'Search...'"> -->
                &nbsp;
            </div>
            <div class="row">
                <div class="col-md-4 col-12 mb-3">
                    <!-- <label for="flatpickr-start-date" class="form-label">Start Date</label> -->
                    <input type="date" class="form-control" (change)="getTaskList(true)" placeholder="Start Date"
                        [(ngModel)]="dateObject.startDate">
                </div>
                <div class="col-md-4 col-12 mb-3">
                    <!-- <label for="flatpickr-end-date" class="form-label">End Date</label> -->
                    <input type="date" class="form-control" [min]="dateObject.startDate" placeholder="End Date"
                        (change)="getTaskList(true)" [(ngModel)]="dateObject.endDate">
                </div>
                <div class="col-md-4 col-12 mb-3 d-md-flex gap-2 ">
                    <button class="btn btn-primary me-1" routerLink="create" *ngIf="loginDetails.is_admin">
                        <i class="fa fa-plus"></i> &nbsp; Add
                    </button>
                    <button class="btn btn-primary" (click)="downloadExcel()">
                        <i class="fa fa-download"></i> &nbsp;
                    </button>
                </div>
            </div>
        </div>
        <div class="d-flex align-items-center gap-10">
            <div class="input-search">
                <label for="">Job No.</label>
                <input class="form-control" [(ngModel)]="jobNo" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Job No...'">
            </div>
            <div class="input-search">
                <label for="">Estimated Counter</label>
                <input class="form-control" [(ngModel)]="counter" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Estimated Counter...'">
            </div>
            <div class="input-search">
                <label for="">Party Name</label>
                <input class="form-control" [(ngModel)]="partyName" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Estimated Counter...'">
            </div>
            <div class="input-search">
                <label for="">Job Name</label>
                <input class="form-control" [(ngModel)]="jobName" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Estimated Counter...'">
            </div>
            <div class="input-search">
                <label for="">Operator</label>
                <input class="form-control" [(ngModel)]="operator" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Operator...'">
            </div>
            <div class="input-search">
                <label for="">Size</label>
                <input class="form-control" [(ngModel)]="size" (input)="searchFilter()" type="search"
                    [placeholder]="'Search Size...'">
            </div>
            <app-dropdown [control]="$any(dashboardForm.get('priority'))" key="name" value="value"
                [dropdownData]="priorityList" (dropdownChanged)="searchFilter()" [clearable]="true" placeholder="Select Priority" [isMultiple]="false"
                label="Select Priority"></app-dropdown>
        </div>
    </div>
    <div class="card-body">
        <app-table-dynamic [headers]="headerData" [currentPage]="p" (clickEditIcon)="edit($event)"
            [sortableColumns]="[true,true,true,true,true,true,true,true,true,false]"
            [sortKey]="['jobNo','counter','partyName','jobName','size','operator','date','taskPriority','taskStatus','finalCounter']"
            (clickViewIcon)="view($event)" (clickDownloadIcon)="download($event)" [tablePaginationId]="'taskIdData'"
            [tableData]="taskList" />
    </div>
</div>